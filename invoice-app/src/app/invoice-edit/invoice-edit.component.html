<div>
    <form class="form-container">
        <h2 *ngIf="this.addingInvoiceMode == true" class="form-header"> Adding <span>New </span>Draft</h2>
        <h2 *ngIf="this.addingInvoiceMode == false" class="form-header"> Edit <span class="form-header-hash">#</span>{{this.invoiceId | slice:0:6}}</h2>
        <div class="mb-3">
            <h3>Bill From</h3>
            <label for="sender-street" class="form-label">
                <p>Street Address</p>
            </label>
            <input type="text" class="form-control" name="sender-street" [(ngModel)]="invoiceSender.street">
            <label for="sender-city" class="form-label">
                <p>City</p>
            </label>
            <input type="text" class="form-control" name="sender-city" [(ngModel)]="invoiceSender.city">
            <label for="sender-postCode" class="form-label">
                <p>Post Code</p>
            </label>
            <input type="text" class="form-control" name="sender-postCode" [(ngModel)]="invoiceSender.postCode">
            <label for="sender-country" class="form-label">
                <p>Country</p>
            </label>
            <input type="text" class="form-control" name="sender-country" [(ngModel)]="invoiceSender.country">
        </div>
        <div class="mb-3">
            <h3>Bill To</h3>
            <label for="client-name" class="form-label">
                <p>Client's Name</p>
            </label>
            <input type="text" class="form-control" name="client-name" [(ngModel)]="invoiceClient.name">
            <label for="client-email" class="form-label">
                <p>Client's Email</p>
            </label>
            <input type="text" class="form-control" name="client-email" [(ngModel)]="invoiceClient.email">
            <!-- NgModel-->
            <label for="client-street" class="form-label">
                <p>Street Address</p>
            </label>
            <input type="text" class="form-control" name="client-street" [(ngModel)]="invoiceClient.street">
            <label for="client-city" class="form-label">
                <p>City</p>
            </label>
            <input type="text" class="form-control" name="client-city" [(ngModel)]="invoiceClient.city">
            <label for="client-postCode" class="form-label">
                <p>Post Code</p>
            </label>
            <input type="text" class="form-control" name="client-postCode" [(ngModel)]="invoiceClient.postCode">
            <label for="client-country" class="form-label">
                <p>Country</p>
            </label>
            <input type="text" class="form-control" name="client-country" [(ngModel)]="invoiceClient.country">
            <label class="form-label" for="dueDate">
                <p>Invoice Due Date</p>
            </label>
            <mat-form-field>
                <input name="dueDate" matInput [matDatepicker]="picker" [(ngModel)]="invoiceDateDue">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker panelClass="datepickerOne"></mat-datepicker>
            </mat-form-field>
            <label class="form-label">
                <p>Payment Terms</p>
            </label>
            <select name="status" id="status" class="form-control" [(ngModel)]="invoicePaymentTerms">
                <option>
                    Net 1 Day
                </option>
                <option>
                    Net 7 Days
                </option>
                <option>
                    Net 14 Days
                </option>
                <option>
                    Net 30 Days
                </option>
            </select>
            <label class="form-label">
                <p>Project Description</p>
            </label>
            <input type="text" class="form-control" value="Graphic Design">
        </div>

        <!-- Items List !-->
        <div class="item-list-container">
            <h2 class="form-header">Item List</h2>
            <div *ngFor="let item of editItems;let index = index;">
                <label class="form-label" for="name">
                    <p>Item Name</p>
                </label>
                <input type="text" class="form-control" name="name{{index}}" [(ngModel)]="editItems[index].name">
                <label class="form-label">
                    <p>Quantity</p>
                </label>
                <!-- Inline onKeyPress allows only numbers-->
                <input type="number" class="form-control" name="quantity{{index}}"
                    [(ngModel)]="editItems[index].quantity"
                    onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))">
                <label class="form-label">
                    <p>Price</p>
                </label>
                <input type="number" step="0.01" min="0" class="form-control" name="price{{index}}"
                    [(ngModel)]="editItems[index].price"
                    onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))">
                <label class="form-label" for="total">
                    <p>Total</p>
                </label>
                <input disabled name="total-price{{index}}" [value]="calculateTotal(item)" class="form-control">
                <div class="trash-can-item-btn" (click)="deleteItem(index)">
                    <img src="../../assets/icon-delete.svg">
                </div>
            </div>
        </div>
        <button class="add-new-item-btn" (click)="addItem()">
            <span>
                <p><b>+ Add New Item</b></p>
            </span>
        </button>
    </form>
    <h2 class="add-edit-grand-total">Grand Total</h2>
</div>

<div class="invoice-edit-delete-mark">
    <!-- Edit mode buttons -->
    <button *ngIf="!addingInvoiceMode" class="invoice-edit-btn" (click)="editReturnToMain()">
        <p>Cancel</p>
    </button>
    <button *ngIf="!addingInvoiceMode" class="invoice-mark-btn" (click)="saveChanges()">
        <p>Save Changes</p>
    </button>

    <!-- Add mode buttons -->
    <button *ngIf="addingInvoiceMode" class="invoice-edit-btn" (click)="editReturnToMain()">
        <p>Discard</p>
    </button>
    <button *ngIf="addingInvoiceMode" class="invoice-save-btn" (click)="saveToDraft()">
        <p>Save as Draft</p>
    </button>
    <button *ngIf="addingInvoiceMode" class="invoice-mark-btn" (click)="saveAndSend()">
        <p>Save and Send</p>
    </button>
</div>

<!-- Item List -->